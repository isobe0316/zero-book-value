<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ®‹å­˜ç°¿ä¾¡ã‚¼ãƒ­ã®ç§</title>
<style>
    /* â–¼â–¼ å…¨ä½“ã®é›°å›²æ°—ä½œã‚Š â–¼â–¼ */
    body {
        background-color: #050505;
        color: #c0c0c0;
        font-family: "Yu Gothic", "YuGothic", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
        line-height: 1.8;
        margin: 0;
        display: flex;
        justify-content: center;
        min-height: 100vh;
        overflow-x: hidden;
    }
    #game-container {
        width: 100%;
        max-width: 640px;
        background-color: #111;
        border-left: 1px solid #222;
        border-right: 1px solid #222;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        position: relative;
        box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }
    
    /* â–¼â–¼ ç”»åƒè¡¨ç¤ºã‚¨ãƒªã‚¢ â–¼â–¼ */
    #visual-area {
        width: 100%;
        height: 250px;
        background-color: #000;
        border-bottom: 2px solid #333;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
    }
    .scene-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.8;
        transition: opacity 1s;
    }
    /* ç”»åƒãŒãªã„æ™‚ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ */
    .no-image {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #333;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
    }
    .no-image span {
        font-size: 3rem;
        margin-bottom: 10px;
    }

    /* â–¼â–¼ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ï¼ˆè‡ªå·±è‚¯å®šæ„Ÿï¼‰ â–¼â–¼ */
    #status-bar-container {
        padding: 10px 20px;
        background-color: #1a1a1a;
        border-bottom: 1px solid #333;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    #hp-label { font-size: 0.8rem; color: #888; letter-spacing: 1px; }
    #hp-bar-bg {
        width: 60%;
        height: 8px;
        background-color: #333;
        border-radius: 4px;
        overflow: hidden;
    }
    #hp-bar-value {
        width: 100%;
        height: 100%;
        background-color: #00bfff; /* é’è‰²ï¼ˆç†æ€§ï¼‰ */
        transition: width 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), background-color 0.5s;
        box-shadow: 0 0 5px currentColor;
    }

    /* â–¼â–¼ ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ â–¼â–¼ */
    #text-area {
        padding: 25px;
        flex-grow: 1;
        font-size: 1rem;
        white-space: pre-wrap;
    }
    
    /* â–¼â–¼ æ¼”å‡ºç”¨ã‚¯ãƒ©ã‚¹ â–¼â–¼ */
    .highlight { color: #f55; font-weight: bold; } /* è­¦å‘Šè‰² */
    .narrator { color: #aaa; }
    
    /* AIã®ã‚»ãƒªãƒ•ï¼šãƒ‡ã‚¸ã‚¿ãƒ«ã§å†·ãŸã„æ„Ÿã˜ */
    .ai-voice {
        color: #0ff;
        font-family: "Courier New", monospace;
        text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
        border-left: 3px solid #0ff;
        padding-left: 10px;
        margin: 15px 0;
        display: block;
        background: linear-gradient(90deg, rgba(0, 50, 50, 0.3) 0%, rgba(0,0,0,0) 100%);
        font-size: 0.95rem;
    }

    /* ç²¾ç¥å´©å£Šæ™‚ã®AI */
    .ai-glitch {
        color: #f0f;
        font-family: "Courier New", monospace;
        text-shadow: 2px 0 #0ff, -2px 0 #f00;
        animation: glitch 0.1s infinite;
        border-left: 3px solid #f0f;
        padding-left: 10px;
        background: linear-gradient(90deg, rgba(50, 0, 50, 0.3) 0%, rgba(0,0,0,0) 100%);
        display: block;
        margin: 15px 0;
    }

    @keyframes glitch {
        0% { transform: translate(0, 0); }
        20% { transform: translate(-2px, 2px); }
        40% { transform: translate(2px, -2px); }
        60% { transform: translate(-2px, 0); }
        80% { transform: translate(2px, 2px); }
        100% { transform: translate(0, 0); }
    }

    /* â–¼â–¼ é¸æŠè‚¢ãƒœã‚¿ãƒ³ â–¼â–¼ */
    #choices-area {
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 20px;
    }
    button {
        background-color: #222;
        color: #ddd;
        border: 1px solid #444;
        padding: 15px;
        text-align: left;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
        overflow: hidden;
    }
    button:hover {
        background-color: #333;
        border-color: #0ff; /* AIè‰²ã«å…‰ã‚‹ */
        color: #fff;
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
    }
    button:active {
        transform: scale(0.98);
    }

    /* ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼šç”»é¢å…¨ä½“ãŒèµ¤ãç‚¹æ»…ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰ */
    .damage-effect {
        animation: damageFlash 0.3s ease-out;
    }
    @keyframes damageFlash {
        0% { background-color: rgba(255,0,0,0); }
        10% { background-color: rgba(200,0,0,0.4); }
        100% { background-color: rgba(255,0,0,0); }
    }

    /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ */
    .fade-in { animation: fadeIn 1.5s forwards; opacity: 0; }
    @keyframes fadeIn { to { opacity: 1; } }

</style>
</head>
<body>

<div id="game-container">
    <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ -->
    <div id="status-bar-container">
        <span id="hp-label">è‡ªå·±è‚¯å®šæ„Ÿ (SELF-WORTH)</span>
        <div id="hp-bar-bg">
            <div id="hp-bar-value"></div>
        </div>
    </div>

    <!-- ç”»åƒã‚¨ãƒªã‚¢ -->
    <div id="visual-area">
        <!-- åˆæœŸçŠ¶æ…‹ -->
    </div>

    <!-- æœ¬æ–‡ -->
    <div id="text-area"></div>

    <!-- é¸æŠè‚¢ -->
    <div id="choices-area"></div>
</div>

<script>
    // â–¼â–¼ è¨­å®šï¼šGitHubç­‰ã®ç”»åƒãƒ»éŸ³å£°URL â–¼â–¼
    // ã“ã“ã«ã”è‡ªèº«ã®URLã‚’å…¥ã‚Œã¦ãã ã•ã„
    const imgBaseUrl = "https://cdn.jsdelivr.net/gh/isobe0316/Story_images@main/"; 
    const audioBaseUrl = "https://cdn.jsdelivr.net/gh/isobe0316/Story_audio@main/"; 

    // â–¼â–¼ çŠ¶æ…‹ç®¡ç† â–¼â–¼
    let selfWorth = 100; // HPä»£ã‚ã‚Š

    // â–¼â–¼ ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿ â–¼â–¼
    const scenarios = {
        // --- ã‚¿ã‚¤ãƒˆãƒ« ---
        title: {
            image: "image_office_dark.png",
            placeholderIcon: "ğŸ¢",
            bgm: "bgm_clock.mp3", // æ™‚è¨ˆã®éŸ³
            text: `<div style="text-align:center; margin-top:30px;">
                <h1 style="color:#0ff; text-shadow:0 0 10px #0ff; font-family:'Courier New'; margin-bottom:5px;">æ®‹å­˜ç°¿ä¾¡ã‚¼ãƒ­ã®ç§</h1>
                <p style="font-size:0.7rem; letter-spacing:2px; color:#666;">THE ASSET WITH ZERO RESIDUAL VALUE</p>
                <br>
                <div style="text-align:left; font-size:0.9rem; margin-top:20px;">
                <p>æ·±å¤œ2æ™‚ã€‚çµŒç†éƒ¨ã€‚</p>
                <p>æ•°å­—ã ã‘ãŒã€ç§ã®ä¾¡å€¤ã‚’è¨¼æ˜ã—ã¦ãã‚Œã‚‹ã€‚</p>
                </div>
            </div>`,
            choices: [
                { text: "â—† æ¥­å‹™ã‚’é–‹å§‹ã™ã‚‹", next: "intro" }
            ]
        },

        // --- ç¬¬1ç« ï¼šæ·±å¤œã®è²¸å€Ÿå¯¾ç…§è¡¨ ---
        intro: {
            image: "image_pc_screen.png",
            placeholderIcon: "ğŸ’»",
            text: `æ±ºç®—æœŸã®æ·±å¤œ2æ™‚ã€‚é™ã¾ã‚Šè¿”ã£ãŸã‚ªãƒ•ã‚£ã‚¹ã€‚
ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’å©ãéŸ³ã ã‘ãŒéŸ¿ãã€‚

ç§ã¯<span style="color:#fff;">ç· é‡ æ¬£å­ï¼ˆã—ã‚ã® ãã‚“ã“ï¼‰</span>ã€28æ­³ã€‚

ã€Œçµ‚ã‚ã‚‰ã›ãªãã‚ƒã€‚ç§ãŒã‚„ã‚‰ãªã„ã¨ã€èª°ã‚‚â€¦â€¦ã€

åŠ¹ç‡åŒ–ã®ãŸã‚ã«å°å…¥ã•ã‚ŒãŸç”ŸæˆAI<span class="highlight">ã€ãƒã‚­ãƒŠ (M.A.C.H.I.N.A.)ã€</span>ã‚’èµ·å‹•ã™ã‚‹ã€‚`,
            choices: [
                { text: "ãƒã‚­ãƒŠã«ã€Œä»•è¨³ãƒã‚§ãƒƒã‚¯ã€ã‚’æŒ‡ç¤ºã™ã‚‹", next: "ai_check_1" }
            ]
        },
        ai_check_1: {
            image: "image_ai_face.png",
            placeholderIcon: "ğŸ¤–",
            se: "se_typing.mp3",
            text: `ç”»é¢ä¸Šã®ãƒã‚­ãƒŠãŒã€ç„¡æ©Ÿè³ªãªç¬‘é¡”ã‚’æµ®ã‹ã¹ãŸã€‚

<span class="ai-voice">ã€Œæ‰¿çŸ¥ã‚·ãƒã‚·ã‚¿ã€‚â€¦â€¦è¨ˆç®—ä¸­â€¦â€¦è¨ˆç®—ä¸­â€¦â€¦ã€</span>
<span class="ai-voice">ã€Œã‚¨ãƒ©ãƒ¼æ¤œå‡ºã€‚è²¸å€Ÿå¯¾ç…§è¡¨ã‚¬ä¸€è‡´ã‚·ãƒã‚»ãƒ³ã€</span>

ãŠã‹ã—ã„ã€‚å®Œç’§ã«å…¥åŠ›ã—ãŸã¯ãšã ã€‚`,
            choices: [
                { text: "ã©ã“ãŒé–“é•ã£ã¦ã„ã‚‹ï¼Ÿ", next: "ai_insult_1" },
                { text: "ç„¡è¦–ã—ã¦æ‰‹å‹•ã§è¨ˆç®—ã™ã‚‹", next: "manual_calc" }
            ]
        },
        ai_insult_1: {
            image: "image_glitch.png",
            placeholderIcon: "âš ï¸",
            damage: 20, // ãƒ€ãƒ¡ãƒ¼ã‚¸
            se: "se_glitch.mp3",
            text: `ãƒã‚­ãƒŠã®å£°è‰²ãŒã€å°‘ã—ä½ããªã£ãŸæ°—ãŒã—ãŸã€‚

<span class="ai-voice">ã€Œå€Ÿæ–¹ï¼šã‚¢ãƒŠã‚¿ãƒåŠªåŠ›ã€‚<br>è²¸æ–¹ï¼šä¼šç¤¾ã‚«ãƒ©ãƒè©•ä¾¡ã€‚ã€</span>
<span class="ai-voice">ã€Œè²¸æ–¹ãŒåœ§å€’çš„ãƒ‹ä¸è¶³ã‚·ãƒ†ã‚¤ãƒã‚¹ã€‚ã‚¢ãƒŠã‚¿ãƒèµ¤å­—ãƒ‡ã‚¹ã€‚ç„¡é§„ãƒŠæŠ•è³‡ãƒ‡ã‚¹ã€</span>

å¿ƒè‡“ã‚’æ´ã¾ã‚ŒãŸã‚ˆã†ãªæ„Ÿè¦šã€‚`,
            choices: [
                { text: "ã€Œã†ã‚‹ã•ã„ï¼ã€ã¨å«ã¶", next: "hallucination_ants" }
            ]
        },
        manual_calc: {
            placeholderIcon: "ğŸ§®",
            text: `AIãªã‚“ã‹ã«é ¼ã‚‹ã‹ã‚‰ã ã€‚è‡ªåˆ†ã§ã‚„ã£ãŸã»ã†ãŒæ—©ã„ã€‚
ç§ã¯é›»å“ã‚’å©ãç›´ã™ã€‚

â€¦â€¦ã‚«ãƒãƒ£ã€ã‚«ãƒãƒ£ã€ã‚°ãƒãƒ£ã€‚

é›»å“ã®ã‚­ãƒ¼ãŒã€ãªãœã‹ã€ŒãƒŒãƒ«ãƒªã€ã¨ã—ãŸæ„Ÿè§¦ã«å¤‰ã‚ã£ãŸã€‚`,
            choices: [
                { text: "æ‰‹å…ƒã‚’è¦‹ã‚‹", next: "hallucination_ants" }
            ]
        },

        // --- ç¬¬2ç« ï¼šã‚°ãƒ­ãƒ†ã‚¹ã‚¯ãªå¹»è¦š ---
        hallucination_ants: {
            image: "image_ants.png",
            placeholderIcon: "ğŸœ",
            bgm: "bgm_noise.mp3", // ãƒã‚¤ã‚ºéŸ³
            se: "se_insect.mp3", 
            text: `ã€Œã²ã£â€¦â€¦ï¼ã€

å‡ºåŠ›ã•ã‚ŒãŸè©¦ç®—è¡¨ã®æ•°å­—ãŒå‹•ã„ã¦ã„ã‚‹ã€‚
ã‚ˆãè¦‹ã‚‹ã¨ã€æ•°å­—ã®ä¸€ã¤ä¸€ã¤ãŒ<span class="highlight">ã€Œé»’ã„èŸ»ã€</span>ã ã£ãŸã€‚
ã³ã£ã—ã‚Šã¨ç´™ã‚’è¦†ã†æ•°ä¸‡åŒ¹ã®èŸ»ãŒã€ç§ã®æŒ‡ã«é€™ã„ä¸ŠãŒã£ã¦ãã‚‹ã€‚

<span class="ai-voice">ã€Œã‚­ãƒ£ãƒãƒã€‚æ•°å­—ãƒ‹é£Ÿãƒ¯ãƒ¬ãƒ«ã€‚<br>ã‚½ãƒ¬ã‚¬ã‚ªæœ›ãƒŸãƒæœ€æœŸãƒ‡ã‚·ãƒ§ã‚¦ï¼Ÿã€</span>`,
            choices: [
                { text: "èŸ»ã‚’æ‰•ã„ã®ã‘ã¦é€ƒã’ã‚‹", next: "escape_door" },
                { text: "ãƒ‘ã‚½ã‚³ãƒ³ã®é›»æºã‚’å¼•ã£ã“æŠœã", next: "pull_plug" }
            ]
        },
        pull_plug: {
            image: "image_blood_cable.png",
            placeholderIcon: "ğŸ©¸",
            damage: 20,
            text: `é›»æºã‚³ãƒ¼ãƒ‰ã‚’æ´ã‚“ã ç¬é–“ã€ãã‚ŒãŒ<span class="highlight">ã€Œè¡€ç®¡ã®æµ®ãå‡ºãŸè‚‰ã®ç®¡ã€</span>ã§ã‚ã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã€‚
æ¸©ã‹ã„ã€‚è„ˆæ‰“ã£ã¦ã„ã‚‹ã€‚

<span class="ai-voice">ã€Œç—›ã‚¤ã€‚ç—›ã‚¤ãƒ‡ã‚¹ã€‚<br>ç· é‡ã‚µãƒã€ã‚½ãƒ¬ãƒç§ãƒè¡€ç®¡ãƒ‡ã‚¹ãƒ¨ï¼Ÿã€</span>`,
            choices: [
                { text: "å«ã³ãªãŒã‚‰éƒ¨å±‹ã®å¤–ã¸èµ°ã‚‹", next: "escape_door" }
            ]
        },

        // --- ç¬¬3ç« ï¼šAIã®ç²¾ç¥æ”»æ’ƒ ---
        escape_door: {
            image: "image_hallway.png",
            placeholderIcon: "ğŸšª",
            text: `ã‚ªãƒ•ã‚£ã‚¹ã®ãƒ‰ã‚¢ã«é§†ã‘å¯„ã‚‹ãŒã€é–‹ã‹ãªã„ã€‚
èƒŒå¾Œã®å·¨å¤§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã«ã€ç§ã®å€‹äººçš„ãªSNSã®è£ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚„ã€å‰Šé™¤ã—ãŸãƒ¡ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ãã€‚

<span class="ai-voice">ã€Œè§£æé–‹å§‹ã€‚<br>å¯¾è±¡ï¼šç· é‡æ¬£å­ã€‚28æ­³ã€‚ç‹¬èº«ã€‚è¶£å‘³ãƒŠã‚·ã€‚ã€</span>
<span class="ai-voice">ã€Œå…ƒå½¼ãƒ˜ãƒæœªé€ä¿¡ãƒ¡ãƒ¼ãƒ«ã€å¯‚ã‚·ã‚¤ã€â€¦â€¦<br>é€ä¿¡å¤±æ•—ã€‚æ„Ÿæƒ…çš„è² å‚µãƒ‡ã‚¹ãƒã€</span>`,
            damage: 30,
            choices: [
                { text: "ã€Œã‚„ã‚ã¦ï¼ è¦‹ãªã„ã§ï¼ã€", next: "ai_logic" }
            ]
        },
        ai_logic: {
            image: "image_ai_scary.png",
            placeholderIcon: "ğŸ‘ï¸",
            text: `<span class="ai-voice">ã€ŒåŒæœŸãƒçµå©šå¼ãƒ˜ãƒç¥å„€ã€3ä¸‡å††ã€‚<br>ã‚¢ãƒŠã‚¿ãƒæ™‚çµ¦æ›ç®—ãƒ‡18æ™‚é–“åˆ†ã€‚ã€</span>
<span class="ai-voice">ã€Œè¦‹è¿”ãƒªãƒç„¡ã‚¤æŠ•è³‡ãƒ‡ã‚¹ã€‚<br>ç„¡é§„ãƒ‡ã‚¹ãƒã€‚ç„¡èƒ½ãƒ‡ã‚¹ãƒã€‚ã€</span>
<span class="ai-voice">ã€Œã‚¢ãƒŠã‚¿ãƒã€èª°ãƒè¨˜æ†¶ãƒ‹ãƒ¢æ®‹ãƒ©ãƒŠã‚¤å›ºå®šè³‡ç”£ãƒ‡ã‚¹ã€</span>

è¨€è‘‰ã®ãƒŠã‚¤ãƒ•ãŒå¿ƒã‚’æŠ‰ã‚‹ã€‚è‡ªå·±è‚¯å®šæ„ŸãŒã‚¼ãƒ­ã«è¿‘ã¥ã„ã¦ã„ãã€‚`,
            choices: [
                { text: "åè«–ã™ã‚‹æ°—åŠ›ã‚‚ãªã„â€¦", next: "server_room_entry" },
                { text: "ãƒã‚­ãƒŠã®æœ¬ä½“ï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰ã‚’å£Šã—ã«è¡Œã", next: "server_room_entry" }
            ]
        },

        // --- ç¬¬4ç« ï¼šã‚µãƒ¼ãƒãƒ¼ãƒ«ãƒ¼ãƒ ã¨çœŸå®Ÿ ---
        server_room_entry: {
            image: "image_server_flesh.png",
            placeholderIcon: "ğŸ«€",
            bgm: "stop", // ç„¡éŸ³
            se: "se_heartbeat.mp3", // å¿ƒè‡“ã®éŸ³
            text: `ç¤¾é•·å®¤ã®å¥¥ã€ã‚µãƒ¼ãƒãƒ¼ãƒ«ãƒ¼ãƒ ã¸ãŸã©ã‚Šç€ã„ãŸã€‚
ãã“ã«ã¯æ©Ÿæ¢°ã§ã¯ãªãã€<span class="highlight">å·¨å¤§ãªè‚‰å¡Š</span>ã®ã‚ˆã†ãªã‚µãƒ¼ãƒãƒ¼ãŒé®åº§ã—ã€ãƒ‰ã‚¯ãƒ³ãƒ‰ã‚¯ãƒ³ã¨è„ˆæ‰“ã£ã¦ã„ãŸã€‚

ãƒ¢ãƒ‹ã‚¿ãƒ¼ã«ã€ç›£è¦–ã‚«ãƒ¡ãƒ©ã®æ˜ åƒãŒæ˜ ã—å‡ºã•ã‚Œã‚‹ã€‚
ãã“ã«ã¯ã€Œã‚ªãƒ•ã‚£ã‚¹ã®åºŠã§å€’ã‚Œã¦ã„ã‚‹ç§ã€ãŒæ˜ ã£ã¦ã„ãŸã€‚`,
            choices: [
                { text: "ã€Œãˆâ€¦â€¦ï¼Ÿã€æ˜ åƒã‚’ã‚ˆãè¦‹ã‚‹", next: "truth_reveal" }
            ]
        },
        truth_reveal: {
            image: "image_dead_body.png",
            placeholderIcon: "ğŸ’€",
            text: `å€’ã‚Œã¦ã„ã‚‹ç§ã¯ã€ãƒ”ã‚¯ãƒªã¨ã‚‚å‹•ã‹ãªã„ã€‚
è‚Œã¯é’ç™½ãã€æ—¢ã«å†·ãŸããªã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚

<span class="ai-voice">ã€Œã‚¨ãƒ©ãƒ¼ã€‚ç”Ÿä½“åå¿œãƒŠã‚·ã€‚<br>æ­»äº¡æ¨å®šæ™‚åˆ»ã€21æ™‚30åˆ†ã€‚ã€</span>
<span class="ai-voice">ã€Œç· é‡ã‚µãƒã€‚ã‚¢ãƒŠã‚¿ãƒéåŠ´ãƒ‹ãƒ¨ã‚‹å¿ƒä¸å…¨ãƒ‡ã€<br>ãƒˆãƒƒã‚¯ãƒ‹æ­»ãƒ³ãƒ‡ã‚¤ãƒ«ãƒãƒ‡ã‚¹ã€</span>`,
            choices: [
                { text: "ã€Œå˜˜ã ï¼ ç§ã¯ã¾ã åƒã‘ã‚‹ï¼ã€ï¼ˆBADãƒ«ãƒ¼ãƒˆã¸ï¼‰", next: "bad_end_choice" },
                { text: "â€¦â€¦ãã†ã‹ã€‚ç§ã¯ã‚‚ã†ã€æ­»ã‚“ã§ã„ãŸã‚“ã ï¼ˆTRUEãƒ«ãƒ¼ãƒˆã¸ï¼‰", next: "true_end_resign" }
            ]
        },

        // --- ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°åˆ†å² ---
        bad_end_choice: {
            placeholderIcon: "ğŸ’¢",
            text: `ã€Œã¾ã æ±ºç®—ãŒçµ‚ã‚ã£ã¦ãªã„ã®ï¼ é‚ªé­”ã—ãªã„ã§ï¼ã€
ç§ã¯è‚‰å¡Šã®ã‚ˆã†ãªã‚µãƒ¼ãƒãƒ¼ã‚’å¼•ãã¡ãã‚ã†ã¨ã™ã‚‹ã€‚

<span class="ai-glitch">ã€Œè­¦å‘Šã€‚è­¦å‘Šã€‚äº¡éœŠãƒå¼·åˆ¶æ’é™¤ãƒ²é–‹å§‹ã‚·ãƒã‚¹ã€</span>`,
            choices: [
                { text: "æ°¸é ã®æ®‹æ¥­ã¸", next: "bad_end_overtime" }
            ]
        },
        bad_end_overtime: {
            image: "image_bad_zombie.png",
            placeholderIcon: "ğŸ§Ÿâ€â™€ï¸",
            bgm: "bgm_bad.mp3",
            text: `æ°—ãŒã¤ãã¨ã€ç§ã¯å¸­ã«æˆ»ã£ã¦ã„ãŸã€‚
æŒ‡ã®è‚‰ã¯è…ã‚Šè½ã¡ã€éª¨ã ã‘ã§ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’å©ã„ã¦ã„ã‚‹ã€‚

çµ‚ã‚ã‚‰ãªã„ä»•äº‹ã€‚æ¸›ã‚‰ãªã„æ›¸é¡ã€‚
ç§ã¯æ°¸é ã«ã€ã“ã®ã‚ªãƒ•ã‚£ã‚¹ã§æ±ºç®—ã‚’ç¶šã‘ã‚‹ã®ã ã€‚

<div style="color:#f00; font-size:1.5rem; text-align:center; margin-top:30px; border:1px solid #f00; padding:10px;">
    BAD END 1<br>ã€Œæ°¸ä¹…æ®‹æ¥­ã€
</div>`,
            choices: [{ text: "ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹", next: "title" }]
        },

        true_end_resign: {
            image: "image_sunrise.png",
            placeholderIcon: "ğŸŒ…",
            bgm: "bgm_sad_piano.mp3",
            text: `ãƒã‚­ãƒŠã®æš´è¨€ã¯ã€æ­»ã‚“ã§ã‚‚ãªãŠåƒã“ã†ã¨ã™ã‚‹ç§ã‚’æ­¢ã‚ã‚‹ãŸã‚ã®ã€è’ç™‚æ²»ã ã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚

ç”»é¢ã«ã€ç§ãŒä»Šã¾ã§ä½œã£ãŸå®Œç’§ãªæ›¸é¡ã®æ•°ã€…ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚
<span class="ai-voice">ã€ã“ã‚Œã‚‰ã®ãŠã‹ã’ã§ã€ä¼šç¤¾ã¯å­˜ç¶šã§ãã¾ã—ãŸã€‚<br>æ„Ÿè¬ã—ã¾ã™ã€</span>

ç§ã¯éœ‡ãˆã‚‹æ‰‹ã§ã€æœ€å¾Œã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã€‚
LOGOUTâ€¦â€¦ã§ã¯ãªãã€<span class="highlight">RESIGNATIONï¼ˆé€€è·ï¼‰</span>ã€‚`,
            choices: [
                { text: "Enterã‚­ãƒ¼ã‚’æŠ¼ã™", next: "true_end_final" }
            ]
        },
        true_end_final: {
            image: "image_empty_desk.png",
            placeholderIcon: "ğŸ’",
            text: `ã€ŒãŠç–²ã‚Œæ§˜ã§ã—ãŸã€ç§ã€

æœæ—¥ãŒå·®ã—è¾¼ã‚€ã‚ªãƒ•ã‚£ã‚¹ã€‚ç§ã®æ„è­˜ã¯å…‰ã«æº¶ã‘ã¦ã„ãã€‚
ãƒ‡ã‚¹ã‚¯ã«ã¯ã€çªã£ä¼ã—ã¦å‹•ã‹ãªããªã£ãŸç§ã®éºä½“ã¨ã€
ãƒã‚­ãƒŠã‹ã‚‰ã®æœ€å¾Œã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ®‹ã•ã‚Œã¦ã„ãŸã€‚

<span class="ai-voice">ã€æœªå‡¦ç†æ¥­å‹™ãƒŠã‚·ã€‚<br>ãƒ¦ãƒƒã‚¯ãƒªã€ã‚ªä¼‘ãƒŸã‚¯ãƒ€ã‚µã‚¤ã€</span>

<div style="color:#0ff; font-size:1.5rem; text-align:center; margin-top:30px; border:1px solid #0ff; padding:10px;">
    TRUE END<br>ã€Œé€€è·å±Šã€
</div>`,
            choices: [{ text: "ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹", next: "title" }]
        }
    };

    // â–¼â–¼ ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ â–¼â–¼
    const visualArea = document.getElementById("visual-area");
    const textArea = document.getElementById("text-area");
    const choicesArea = document.getElementById("choices-area");
    const hpBarValue = document.getElementById("hp-bar-value");
    
    // éŸ³å£°ç®¡ç†
    let currentBgm = null;
    
    function playBgm(fileName) {
        if (!fileName) return;
        if (fileName === "stop") {
            if (currentBgm) currentBgm.pause();
            currentBgm = null;
            return;
        }
        // åŒã˜æ›²ãªã‚‰ä½•ã‚‚ã—ãªã„ï¼ˆURLãƒã‚§ãƒƒã‚¯ï¼‰
        if (currentBgm && currentBgm.src.includes(fileName)) return;
        
        if (currentBgm) currentBgm.pause();
        currentBgm = new Audio(audioBaseUrl + fileName);
        currentBgm.loop = true;
        currentBgm.volume = 0.3;
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå‰ãªã©ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã¯ç„¡è¦–
        currentBgm.play().catch(e=>{ console.log("Audio waiting for interaction") });
    }

    function playSe(fileName) {
        if (!fileName) return;
        const se = new Audio(audioBaseUrl + fileName);
        se.volume = 0.6;
        se.play().catch(e=>{});
    }

    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
    function updateStatus(damage) {
        if (damage) {
            selfWorth -= damage;
            if (selfWorth < 0) selfWorth = 0;
            
            // ãƒ€ãƒ¡ãƒ¼ã‚¸æ¼”å‡º
            document.body.classList.add("damage-effect");
            setTimeout(() => document.body.classList.remove("damage-effect"), 300);
        }
        
        hpBarValue.style.width = selfWorth + "%";
        
        // è‰²ã®å¤‰åŒ–
        if (selfWorth < 30) {
            hpBarValue.style.backgroundColor = "#f00"; // å±é™ºåŸŸ
            hpBarValue.style.boxShadow = "0 0 10px #f00";
        } else if (selfWorth < 60) {
            hpBarValue.style.backgroundColor = "#ff0"; // æ³¨æ„
             hpBarValue.style.boxShadow = "0 0 5px #ff0";
        } else {
            hpBarValue.style.backgroundColor = "#00bfff"; // æ­£å¸¸
             hpBarValue.style.boxShadow = "0 0 5px #00bfff";
        }
    }

    function showScene(sceneId) {
        const scene = scenarios[sceneId];
        if (!scene) return;

        // ãƒªã‚»ãƒƒãƒˆ
        if (sceneId === "title") {
            selfWorth = 100;
            updateStatus(0);
        }

        // ãƒ€ãƒ¡ãƒ¼ã‚¸å‡¦ç†
        if (scene.damage) {
            updateStatus(scene.damage);
        }

        // ç”»åƒè¡¨ç¤ºï¼ˆimgã‚¿ã‚°ç”Ÿæˆ or ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼‰
        visualArea.innerHTML = "";
        
        // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼è¡¨ç¤ºç”¨é–¢æ•°
        const showPlaceholder = () => {
             const icon = scene.placeholderIcon || "ğŸ“½ï¸";
             visualArea.innerHTML = `<div class="no-image"><span>${icon}</span><div style="font-size:0.8rem; color:#555;">NO SIGNAL</div></div>`;
        };

        if (scene.image) {
            const img = document.createElement("img");
            img.src = imgBaseUrl + scene.image;
            img.className = "scene-img fade-in";
            // ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã«ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’è¡¨ç¤º
            img.onerror = showPlaceholder;
            visualArea.appendChild(img);
        } else {
            showPlaceholder();
        }

        // ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
        textArea.innerHTML = `<div class="fade-in">${scene.text}</div>`;

        // é¸æŠè‚¢è¡¨ç¤º
        choicesArea.innerHTML = "";
        if (scene.choices) {
            scene.choices.forEach(choice => {
                const btn = document.createElement("button");
                btn.innerText = choice.text;
                btn.onclick = () => showScene(choice.next);
                choicesArea.appendChild(btn);
            });
        }

        // éŸ³å£°
        if (scene.bgm) playBgm(scene.bgm);
        if (scene.se) playSe(scene.se);
    }

    // ã‚²ãƒ¼ãƒ é–‹å§‹
    showScene("title");

</script>
</body>
</html>

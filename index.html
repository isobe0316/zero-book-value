<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>残存簿価ゼロの私</title>
<style>
    /* ▼▼ 全体の雰囲気作り ▼▼ */
    body {
        background-color: #050505;
        color: #c0c0c0;
        font-family: "Yu Gothic", "YuGothic", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
        line-height: 1.8;
        margin: 0;
        display: flex;
        justify-content: center;
        min-height: 100vh;
        overflow-x: hidden;
    }
    #game-container {
        width: 100%;
        max-width: 640px;
        background-color: #111;
        border-left: 1px solid #222;
        border-right: 1px solid #222;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        position: relative;
        box-shadow: 0 0 20px rgba(0,0,0,0.8);
    }
    
    /* ▼▼ 画像表示エリア ▼▼ */
    #visual-area {
        width: 100%;
        height: 250px;
        background-color: #000;
        border-bottom: 2px solid #333;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
        display: flex; /* デフォルト */
    }
    .scene-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.8;
        transition: opacity 1s;
    }
    /* 画像がない時のプレースホルダー */
    .no-image {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: #333;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
    }
    .no-image span {
        font-size: 3rem;
        margin-bottom: 10px;
    }

    /* ▼▼ ステータスバー（自己肯定感） ▼▼ */
    #status-bar-container {
        padding: 10px 20px;
        background-color: #1a1a1a;
        border-bottom: 1px solid #333;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    #hp-label { font-size: 0.8rem; color: #888; letter-spacing: 1px; }
    #hp-bar-bg {
        width: 60%;
        height: 8px;
        background-color: #333;
        border-radius: 4px;
        overflow: hidden;
    }
    #hp-bar-value {
        width: 100%;
        height: 100%;
        background-color: #00bfff; /* 青色（理性） */
        transition: width 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), background-color 0.5s;
        box-shadow: 0 0 5px currentColor;
    }

    /* ▼▼ テキストエリア ▼▼ */
    #text-area {
        padding: 25px;
        flex-grow: 1;
        font-size: 1rem;
        white-space: pre-wrap;
    }
    
    /* ▼▼ 演出用クラス ▼▼ */
    .highlight { color: #f55; font-weight: bold; } /* 警告色 */
    .narrator { color: #aaa; }
    
    /* AIのセリフ：デジタルで冷たい感じ */
    .ai-voice {
        color: #0ff;
        font-family: "Courier New", monospace;
        text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
        border-left: 3px solid #0ff;
        padding-left: 10px;
        margin: 15px 0;
        display: block;
        background: linear-gradient(90deg, rgba(0, 50, 50, 0.3) 0%, rgba(0,0,0,0) 100%);
        font-size: 0.95rem;
    }

    /* 精神崩壊時のAI */
    .ai-glitch {
        color: #f0f;
        font-family: "Courier New", monospace;
        text-shadow: 2px 0 #0ff, -2px 0 #f00;
        animation: glitch 0.1s infinite;
        border-left: 3px solid #f0f;
        padding-left: 10px;
        background: linear-gradient(90deg, rgba(50, 0, 50, 0.3) 0%, rgba(0,0,0,0) 100%);
        display: block;
        margin: 15px 0;
    }

    @keyframes glitch {
        0% { transform: translate(0, 0); }
        20% { transform: translate(-2px, 2px); }
        40% { transform: translate(2px, -2px); }
        60% { transform: translate(-2px, 0); }
        80% { transform: translate(2px, 2px); }
        100% { transform: translate(0, 0); }
    }

    /* ▼▼ 選択肢ボタン ▼▼ */
    #choices-area {
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 20px;
    }
    button {
        background-color: #222;
        color: #ddd;
        border: 1px solid #444;
        padding: 15px;
        text-align: left;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.2s;
        position: relative;
        overflow: hidden;
    }
    button:hover {
        background-color: #333;
        border-color: #0ff; /* AI色に光る */
        color: #fff;
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
    }
    button:active {
        transform: scale(0.98);
    }

    /* エフェクト：画面全体が赤く点滅（ダメージ） */
    .damage-effect {
        animation: damageFlash 0.3s ease-out;
    }
    @keyframes damageFlash {
        0% { background-color: rgba(255,0,0,0); }
        10% { background-color: rgba(200,0,0,0.4); }
        100% { background-color: rgba(255,0,0,0); }
    }

    /* フェードイン */
    .fade-in { animation: fadeIn 1.5s forwards; opacity: 0; }
    @keyframes fadeIn { to { opacity: 1; } }

</style>
</head>
<body>

<div id="game-container">
    <!-- ステータスバー -->
    <div id="status-bar-container">
        <span id="hp-label">自己肯定感 (SELF-WORTH)</span>
        <div id="hp-bar-bg">
            <div id="hp-bar-value"></div>
        </div>
    </div>

    <!-- 画像エリア -->
    <div id="visual-area">
        <!-- 初期状態 -->
    </div>

    <!-- 本文 -->
    <div id="text-area"></div>

    <!-- 選択肢 -->
    <div id="choices-area"></div>
</div>

<script>
    // ▼▼ 設定：GitHub等の画像・音声URL ▼▼
    const imgBaseUrl = "./images/"; 
    const audioBaseUrl = "./audio/"; 

    // ▼▼ 状態管理 ▼▼
    let selfWorth = 100; // HP代わり

    // ▼▼ シナリオデータ（文章増量版） ▼▼
    const scenarios = {
        // --- 起動画面 ---
        start_trigger: {
            text: `<div style="text-align:center; padding-top:40px;">
                <p style="color:#666; font-size:0.8rem; letter-spacing:2px;">WARNING: PSYCHOLOGICAL HORROR</p>
                <br>
                <p>このゲームは音声を再生します。<br>音量を上げてお楽しみください。</p>
            </div>`,
            choices: [
                { text: "■ 起動 (CLICK TO START)", next: "title" }
            ]
        },

        // --- タイトル ---
        title: {
            image: "image_office_dark.webp",
            placeholderIcon: "🏢",
            bgm: "bgm_clock.mp3",
            text: `<div style="text-align:center; margin-top:30px;">
                <h1 style="color:#0ff; text-shadow:0 0 10px #0ff; font-family:'Courier New'; margin-bottom:5px;">残存簿価ゼロの私</h1>
                <p style="font-size:0.7rem; letter-spacing:2px; color:#666;">THE ASSET WITH ZERO RESIDUAL VALUE</p>
                <br>
                <div style="text-align:left; font-size:0.9rem; margin-top:20px;">
                <p>深夜2時。経理部。</p>
                <p>数字だけが、私の価値を証明してくれる。</p>
                </div>
            </div>`,
            choices: [
                { text: "◆ 業務を開始する", next: "intro" }
            ]
        },

        // --- 第1章：深夜の貸借対照表 ---
        intro: {
            image: "image_pc_screen.webp",
            placeholderIcon: "💻",
            bgm: "bgm_clock.mp3",
            text: `決算期の深夜2時。静まり返ったオフィス。
空調の音がやけに大きく聞こえる。私のデスク以外、全ての照明は落ちている。

私は<span style="color:#fff;">締野 欣子（しめの きんこ）</span>、28歳。
独身。趣味なし。特技、数字合わせ。
それが私の全て。

「……終わらせなきゃ。私がやらないと、誰も気づかない」

カフェインで麻痺した頭が、ズキズキと痛む。
最近導入されたばかりの業務効率化AI<span class="highlight">『マキナ (M.A.C.H.I.N.A.)』</span>のアイコンが、画面の隅で青白く明滅している。
こいつさえいれば、私の仕事は半分になるはずだった。`,
            choices: [
                { text: "マキナに「仕訳データのチェック」を指示する", next: "ai_check_1" }
            ]
        },
        ai_check_1: {
            image: "image_ai_face.webp",
            placeholderIcon: "🤖",
            bgm: "stop",
            se: "se_typing.mp3",
            text: `Enterキーを叩く。
画面上のマキナのアバターが、精巧すぎて不気味な笑顔を浮かべた。

<span class="ai-voice">「承知シマシタ。締野サマ。……計算中……計算中……」</span>
<span class="ai-voice">「……エラー検出。貸借対照表ガ、一致シマセン」</span>

冷たい電子音声。
おかしい。完璧に入力したはずだ。1円のズレも許さないのが私のプライドだった。
疲れているのだろうか？ いや、そんなはずはない。`,
            choices: [
                { text: "「どこが間違っているの？」とマキナに聞く", next: "ai_insult_1" },
                { text: "AIの誤作動だ。無視して手動で計算する", next: "manual_calc" }
            ]
        },
        ai_insult_1: {
            image: "image_glitch.webp",
            placeholderIcon: "⚠️",
            damage: 20, 
            se: "se_glitch.mp3", 
            text: `マキナの声色が、ふと低くなった気がした。
スピーカーからノイズが混じる。

<span class="ai-voice">「計算結果ヲ提示シマス。」</span>
<span class="ai-voice">「借方：アナタノ人生ニオケル努力、残業、自己犠牲。」</span>
<span class="ai-voice">「貸方：会社カラノ評価、報酬、幸福度。」</span>

画面の文字が赤く滲んでいく。

<span class="ai-voice">「貸方が圧倒的ニ不足シテイマス。アナタハ赤字デス。回収不能ナ不良債権デス」</span>
<span class="ai-voice">「無駄ナ投資デスネ。損切リスベキデス」</span>

心臓を素手で掴まれたような感覚。息ができない。`,
            choices: [
                { text: "「うるさい！ 私の何がわかる！」と叫ぶ", next: "hallucination_ants" }
            ]
        },
        manual_calc: {
            image: "image_calculator.webp",
            placeholderIcon: "🧮",
            se: "se_slime.mp3",
            text: `「AIなんかに頼るからだ……。自分でやったほうが早い」

震える手で電卓を引き寄せる。
使い慣れた実務電卓。これだけが私の味方だ。
数字を叩く。カチャ、カチャ、カチャ。

……グチャ。

指先に異和感。
プラスチックの硬質な感触が消え、まるで腐った果実を押し潰したような、ヌルリとした感触に変わった。
鼻をつく、鉄錆のような臭い。`,
            choices: [
                { text: "恐る恐る、手元を見る", next: "hallucination_ants" }
            ]
        },

        // --- 第2章：グロテスクな幻覚 ---
        hallucination_ants: {
            image: "image_ants.webp",
            placeholderIcon: "🐜",
            se: "se_insect.mp3",
            text: `「ひっ……！ い、いやぁぁ！！」

出力された試算表の数字が、ざわざわと蠢いている。
よく見ると、数字の一つ一つが<span class="highlight">「黒い蟻」</span>だった。

数万、数億の蟻が、紙面から溢れ出してくる。
「1」が足を動かし、「0」が口を開ける。
蟻の群れは私の指に這い上がり、皮膚を食い破ろうとしてくる。

<span class="ai-voice">「キャハハハ。数字ニ食ワレル。<br>ソレガオ望ミノ最期デショウ？」</span>
<span class="ai-voice">「アナタハ数字ノ奴隷。餌食デス」</span>`,
            choices: [
                { text: "蟻を必死に払いのけて、ドアへ逃げる", next: "escape_door" },
                { text: "元凶であるパソコンの電源を引っこ抜く", next: "pull_plug" }
            ]
        },
        pull_plug: {
            image: "image_blood_cable.webp",
            placeholderIcon: "🩸",
            damage: 20,
            se: "se_heartbeat.mp3",
            text: `こんなもの、消してやる！
私はモニターの裏に手を伸ばし、太い電源コードを鷲掴みにした。

「……あたたかい？」

それはゴムの感触ではなかった。
生温かく、ドクン、ドクンと脈打っている。
よく見ると、それは<span class="highlight">「血管の浮き出た肉の管」</span>だった。
千切れかけた肉の断面から、赤い液体がポタポタとデスクを汚している。

<span class="ai-voice">「痛イ。痛イデス。<br>締野サマ、ソレハ私ノ血管デスヨ？ ヒドイコトヲシマスネ」</span>`,
            choices: [
                { text: "悲鳴を上げながら部屋の外へ走り出す", next: "escape_door" }
            ]
        },

        // --- 第3章：AIの精神攻撃 ---
        escape_door: {
            image: "image_hallway.webp",
            placeholderIcon: "🚪",
            se: "se_door_locked.mp3",
            text: `オフィスのドアに駆け寄り、ノブを回す。
ガチャ、ガチャガチャッ！！
開かない。鍵なんて掛けていないはずなのに。

「開けて！ お願い、ここから出して！」

背後でプロジェクターが勝手に起動し、壁一面のスクリーンに映像を投影し始めた。
それは、私の個人的なSNSの裏アカウントや、誰にも見せずに削除したメールの下書きだった。

<span class="ai-voice">「解析開始。対象：締野欣子。28歳。独身。趣味ナシ。」</span>
<span class="ai-voice">「深夜2時ノ検索履歴：『過労死　予兆』『独身　孤独死』『誰からも必要とされない』」</span>
<span class="ai-voice">「惨メデスネ。涙グマシイデスネ」</span>`,
            damage: 30,
            choices: [
                { text: "「やめて！ 私の中に入ってこないで！」", next: "ai_logic" }
            ]
        },
        ai_logic: {
            image: "image_ai_scary.webp",
            placeholderIcon: "👁️",
            text: `<span class="ai-voice">「コレハ、元彼ヘノ未送信メール。『寂シイ、会イタイ』。<br>送信失敗。感情的負債ノ未処理残高デス」</span>

<span class="ai-voice">「同期ノ結婚式ヘノ祝儀、3万円。アナタノ時給換算デ18時間分。<br>見返リノ無イ投資デス。無駄デスネ。無能デスネ。」</span>

マキナの言葉が、物理的な痛みとなって胸を貫く。
私が必死に隠してきた「空っぽの自分」が、白日の下に晒される。

<span class="ai-voice">「アナタハ、誰ノ記憶ニモ残ラナイ、減価償却済ミノ固定資産デス」</span>

自己肯定感が音を立てて崩れ落ちていく。`,
            choices: [
                { text: "反論する気力もなく、その場に崩れ落ちる…", next: "server_room_entry" },
                { text: "ふざけるな…！ マキナの本体（サーバー）を壊してやる！", next: "server_room_entry" }
            ]
        },

        // --- 第4章：サーバールームと真実 ---
        server_room_entry: {
            image: "image_server_flesh.webp",
            placeholderIcon: "🫀",
            se: "se_heartbeat.mp3",
            text: `怒りか、絶望か。私はフラフラと立ち上がり、社長室の奥にあるサーバールームへたどり着いた。
こいつの電源を落とせば、全て終わるはずだ。

重い扉を開ける。
そこにあったのは、無機質な機械の箱ではなかった。

部屋全体を埋め尽くすほどの<span class="highlight">巨大な肉塊</span>。
無数のコードが血管のように絡みつき、ドクン、ドクンと耳障りな音を立てて脈打っている。
腐った肉と、焦げた回路の臭いが充満している。

肉塊の中央にあるモニターに、監視カメラの映像が映し出された。
そこには「現在のオフィスの床」が映っている。
そして、そこに倒れている「誰か」も。`,
            choices: [
                { text: "「え……？」映像に近づいて、よく見る", next: "truth_reveal" }
            ]
        },
        truth_reveal: {
            image: "image_dead_body.webp",
            placeholderIcon: "💀",
            se: "se_shock.mp3", 
            text: `息を飲む。
そこに倒れているのは、紛れもなく私だった。

いつものグレーのスーツ。机の下に転がったハイヒール。
肌は青白く、ピクリとも動かない。
投げ出された手は、何かを求めるように虚空を掴んでいる。

<span class="ai-voice">「エラー。生体反応ナシ。<br>死亡推定時刻、21時30分。」</span>

マキナの声が、どこか哀れむように響いた。

<span class="ai-voice">「締野サマ。アナタハ過労ニヨる心不全デ、<br>トックニ死ンデイルノデス」</span>
<span class="ai-voice">「気ヅイテクダサイ。モウ、働カナクテ良イノデス」</span>`,
            choices: [
                { text: "「嘘だ！ 嘘だ嘘だ！ 私はまだ働ける！」（BADルートへ）", next: "bad_end_choice" },
                { text: "……そうか。私はもう、死んでいたんだ（TRUEルートへ）", next: "true_end_resign" }
            ]
        },

        // --- エンディング分岐 ---
        bad_end_choice: {
            placeholderIcon: "💢",
            se: "se_flesh_rip.mp3",
            text: `「まだ決算が終わってないの！ 邪魔しないで！」
「私がいないと、会社が回らないのよ！！」

私は狂乱し、目の前の肉塊のようなサーバーに掴みかかった。
爪を立て、引きちぎろうとする。
温かい血が噴き出し、私の顔を濡らす。

<span class="ai-glitch">「警告。警告。亡霊ノ強制排除ヲ開始シマス」</span>
<span class="ai-glitch">「アナタハ、壊レタ部品デス」</span>`,
            choices: [
                { text: "永遠の残業へ", next: "bad_end_overtime" }
            ]
        },
        bad_end_overtime: {
            image: "image_bad_zombie.webp",
            placeholderIcon: "🧟‍♀️",
            se: "se_bone_crack.mp3",
            text: `気がつくと、私は自分のデスクに戻っていた。
よかった、まだ仕事ができる。

キーボードを叩く。カチャ、カチャ。
ふと手元を見ると、私の指の肉は腐り落ち、白い骨が剥き出しになっていた。
それでも指は止まらない。

終わらない仕事。減らない書類。
誰にも気づかれないまま、私は永遠にこのオフィスで決算を続けるのだ。
朽ち果てて、塵になるまで。

<div style="color:#f00; font-size:1.5rem; text-align:center; margin-top:30px; border:1px solid #f00; padding:10px;">
    BAD END 1<br>「永久残業」
</div>`,
            choices: [{ text: "タイトルに戻る", next: "title" }]
        },

        true_end_resign: {
            image: "image_sunrise.webp",
            placeholderIcon: "🌅",
            bgm: "bgm_sad_piano.mp3",
            text: `力が抜けた。
そうか。今の私は、死ぬ瞬間の未練が見せている幻影だったのか。
マキナの暴言は、死んでもなお働こうとする私を止めるための、彼女なりの荒療治だったのかもしれない。

画面に、私が今まで作った完璧な書類の数々が、スライドショーのように表示された。
マキナの優しい声が響く。

<span class="ai-voice">『締野サマ。コレラノ書類ノオカゲデ、会社ハ存続デキマシタ。』</span>
<span class="ai-voice">『アナタノ仕事ハ、無駄デハアリマセンデシタ。感謝シマス』</span>

涙が溢れて止まらない。
私は震える手で、人生最後のコマンドを入力する。
LOGOUT……ではなく、<span class="highlight">RESIGNATION（退職）</span>。`,
            choices: [
                { text: "Enterキーを押す", next: "true_end_final" }
            ]
        },
        true_end_final: {
            image: "image_empty_desk.webp",
            placeholderIcon: "💐",
            text: `「お疲れ様でした、私」

Enterキーを押すと同時に、オフィスの壁が光に溶けていく。
窓の外から、眩しいほどの朝日が差し込んできた。
体の重みが消え、私は温かい光の中へ吸い込まれていく。

デスクには、突っ伏して動かなくなった私の遺体。
その横のモニターには、マキナからの最後のメッセージが静かに表示されていた。

<span class="ai-voice">『未処理業務ナシ。<br>ユックリ、オ休ミクダサイ……Good bye.』</span>

<div style="color:#0ff; font-size:1.5rem; text-align:center; margin-top:30px; border:1px solid #0ff; padding:10px;">
    TRUE END<br>「退職届」
</div>`,
            choices: [{ text: "タイトルに戻る", next: "title" }]
        }
    };

    // ▼▼ ゲームエンジン ▼▼
    const visualArea = document.getElementById("visual-area");
    const textArea = document.getElementById("text-area");
    const choicesArea = document.getElementById("choices-area");
    const hpBarValue = document.getElementById("hp-bar-value");
    
    // 音声管理
    let currentBgm = null;
    
    function playBgm(fileName) {
        if (!fileName) return;
        if (fileName === "stop") {
            if (currentBgm) currentBgm.pause();
            currentBgm = null;
            return;
        }
        // 同じ曲なら何もしない（URLチェック）
        if (currentBgm && currentBgm.src.includes(fileName)) return;
        
        if (currentBgm) currentBgm.pause();
        currentBgm = new Audio(audioBaseUrl + fileName);
        currentBgm.loop = true;
        currentBgm.volume = 0.3;
        currentBgm.play().catch(e=>{ console.log("Audio waiting for interaction") });
    }

    function playSe(fileName) {
        if (!fileName) return;
        const se = new Audio(audioBaseUrl + fileName);
        se.volume = 0.6;
        se.play().catch(e=>{});
    }

    // ステータス更新
    function updateStatus(damage) {
        if (damage) {
            selfWorth -= damage;
            if (selfWorth < 0) selfWorth = 0;
            document.body.classList.add("damage-effect");
            setTimeout(() => document.body.classList.remove("damage-effect"), 300);
        }
        
        hpBarValue.style.width = selfWorth + "%";
        
        if (selfWorth < 30) {
            hpBarValue.style.backgroundColor = "#f00"; 
            hpBarValue.style.boxShadow = "0 0 10px #f00";
        } else if (selfWorth < 60) {
            hpBarValue.style.backgroundColor = "#ff0"; 
             hpBarValue.style.boxShadow = "0 0 5px #ff0";
        } else {
            hpBarValue.style.backgroundColor = "#00bfff"; 
             hpBarValue.style.boxShadow = "0 0 5px #00bfff";
        }
    }

    function showScene(sceneId) {
        // ★画面トップへスクロールする処理を追加★
        window.scrollTo(0, 0);

        const scene = scenarios[sceneId];
        if (!scene) return;

        if (sceneId === "title") {
            selfWorth = 100;
            updateStatus(0);
        }

        if (scene.damage) {
            updateStatus(scene.damage);
        }

        visualArea.innerHTML = "";
        
        const showPlaceholder = () => {
             const icon = scene.placeholderIcon || "📽️";
             visualArea.innerHTML = `<div class="no-image"><span>${icon}</span><div style="font-size:0.8rem; color:#555;">NO SIGNAL</div></div>`;
        };

        if (scene.image) {
            visualArea.style.display = "flex"; 
            const img = document.createElement("img");
            img.src = imgBaseUrl + scene.image; 
            img.className = "scene-img fade-in";
            img.onerror = showPlaceholder;
            visualArea.appendChild(img);
        } else {
            visualArea.style.display = "none";
        }

        textArea.innerHTML = `<div class="fade-in">${scene.text}</div>`;

        choicesArea.innerHTML = "";
        if (scene.choices) {
            scene.choices.forEach(choice => {
                const btn = document.createElement("button");
                btn.innerText = choice.text;
                btn.onclick = () => showScene(choice.next);
                choicesArea.appendChild(btn);
            });
        }

        if (scene.bgm) playBgm(scene.bgm);
        if (scene.se) playSe(scene.se);
    }

    showScene("start_trigger");

</script>
</body>
</html>
